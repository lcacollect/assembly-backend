directive @keys(fields: String!) on OBJECT

schema @link(url: "https://specs.apollo.dev/federation/v2.3", import: ["@key", "@shareable"]) {
  query: Query
  mutation: Mutation
}

input AssemblyLayerDeleteInput {
  id: String!
}

input AssemblyLayerInput {
  epdId: String!
  id: String
  name: String
  conversionFactor: Float
  referenceServiceLife: Int
  description: String
  transportType: TransportType
  transportDistance: Float
  transportUnit: String
}

input AssemblyLayerUpdateInput {
  epdId: String!
  id: String!
  name: String
  conversionFactor: Float
  referenceServiceLife: Int
  description: String
  transportType: TransportType
  transportDistance: Float
  transportUnit: String
}

"""Date (isoformat)"""
scalar Date

input EPDFilters {
  id: FilterOptions = null
  unit: FilterOptions = null
  name: FilterOptions = null
  category: FilterOptions = null
  source: FilterOptions = null
  type: FilterOptions = null
  region: FilterOptions = null
  owner: FilterOptions = null
}

input EPDSort {
  name: SortOptions = null
  unit: SortOptions = null
  category: SortOptions = null
  source: SortOptions = null
  type: SortOptions = null
  region: SortOptions = null
  owner: SortOptions = null
}

input FilterOptions {
  equal: String = null
  contains: String = null
  startsWith: String = null
  endsWith: String = null
  isEmpty: Boolean = null
  isNotEmpty: Boolean = null
  isAnyOf: [String!] = null
  jsonContains: String = null
}

input GraphQLAddEpdInput {
  id: String = null
  name: String!
  version: String!
  declaredUnit: GraphQLUnit!
  validUntil: Date!
  publishedDate: Date!
  source: JSON!
  location: String!
  subtype: String!
  referenceServiceLife: Int = null
  comment: String = null
  gwp: JSON = null
  odp: JSON = null
  ap: JSON = null
  ep: JSON = null
  pocp: JSON = null
  penre: JSON = null
  pere: JSON = null
  metaFields: JSON = null
  conversions: JSON = null
}

type GraphQLAssemblyLayer {
  id: String
  epd: GraphQLProjectEPD!
  name: String
  conversionFactor: Float
  referenceServiceLife: Int
  description: String
  transportType: TransportType
  transportDistance: Float
  transportUnit: String
  epdId: String!
}

enum GraphQLAssemblyUnit {
  m
  m2
  m3
  kg
  pcs
}

type GraphQLConversion {
  to: GraphQLUnit!
  value: Float!
}

type GraphQLEPD {
  id: String!
  name: String!
  version: String!
  declaredUnit: String
  validUntil: Date!
  publishedDate: Date!
  source: String!
  location: String!
  subtype: String!
  referenceServiceLife: Int
  comment: String
  conversions: [GraphQLConversion!]!
  gwp: GraphQLImpactCategories
  odp: GraphQLImpactCategories
  ap: GraphQLImpactCategories
  ep: GraphQLImpactCategories
  pocp: GraphQLImpactCategories
  penre: GraphQLImpactCategories
  pere: GraphQLImpactCategories
  originId: String
}

type GraphQLEPDBase {
  id: String!
  name: String!
  version: String!
  declaredUnit: String
  validUntil: Date!
  publishedDate: Date!
  source: String!
  location: String!
  subtype: String!
  referenceServiceLife: Int
  comment: String
  conversions: [GraphQLConversion!]!
  gwp: GraphQLImpactCategories
  odp: GraphQLImpactCategories
  ap: GraphQLImpactCategories
  ep: GraphQLImpactCategories
  pocp: GraphQLImpactCategories
  penre: GraphQLImpactCategories
  pere: GraphQLImpactCategories
}

type GraphQLEPDConnection {
  pageInfo: PageInfo!
  edges: [GraphQLEPDEdge!]!
  numEdges: Int!
}

type GraphQLEPDEdge {
  node: GraphQLEPD!
  cursor: String!
}

type GraphQLImpactCategories {
  a1a3: Float
  a4: Float
  a5: Float
  b1: Float
  b2: Float
  b3: Float
  b4: Float
  b5: Float
  b6: Float
  b7: Float
  c1: Float
  c2: Float
  c3: Float
  c4: Float
  d: Float
}

type GraphQLProjectAssembly {
  id: String!
  name: String!
  projectId: String!
  category: String!
  lifeTime: Float!
  metaFields: JSON
  unit: GraphQLAssemblyUnit!
  conversionFactor: Float!
  description: String
  layers: [GraphQLAssemblyLayer!]!
  gwp(phases: [String!] = null): Float!
}

type GraphQLProjectEPD @keys(fields: "project_id") {
  id: String!
  name: String!
  version: String!
  declaredUnit: String
  validUntil: Date!
  publishedDate: Date!
  source: String!
  location: String!
  subtype: String!
  referenceServiceLife: Int
  comment: String
  conversions: [GraphQLConversion!]!
  gwp: GraphQLImpactCategories
  odp: GraphQLImpactCategories
  ap: GraphQLImpactCategories
  ep: GraphQLImpactCategories
  pocp: GraphQLImpactCategories
  penre: GraphQLImpactCategories
  pere: GraphQLImpactCategories
  originId: String!
  assemblies: [GraphQLProjectAssembly!]
  projectId: ID! @shareable
}

type GraphQLSchemaElement @key(fields: "id") {
  id: ID!
  assemblyId: String @shareable
  assembly: GraphQLProjectAssembly
}

enum GraphQLUnit {
  M
  M2
  M3
  KG
  TONES
  PCS
  L
  M2R1
  UNKNOWN
}

"""
The `JSON` scalar type represents JSON values as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar JSON @specifiedBy(url: "http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf")

type Mutation {
  """Add Global EPDs to a project."""
  addProjectEpds(projectId: String!, epdIds: [String!]!): [GraphQLProjectEPD!]!

  """Delete a project EPD"""
  deleteProjectEpds(ids: [String!]!): [String!]!

  """Add Global EPDs."""
  addEpds(epds: [GraphQLAddEpdInput!]!): [GraphQLEPD!]!

  """Delete a global EPD"""
  deleteEpds(ids: [String!]!): [String!]!
  addProjectAssemblies(assemblies: [ProjectAssemblyAddInput!]!): [GraphQLProjectAssembly!]!
  deleteProjectAssemblies(ids: [String!]!): [String!]!
  updateProjectAssemblies(assemblies: [ProjectAssemblyUpdateInput!]!): [GraphQLProjectAssembly!]!
  addProjectAssemblyLayers(id: String!, layers: [AssemblyLayerInput!]!): [GraphQLAssemblyLayer!]!
  deleteProjectAssemblyLayers(id: String!, layers: [AssemblyLayerDeleteInput!]!): [String!]!
  updateProjectAssemblyLayers(id: String!, layers: [AssemblyLayerUpdateInput!]!): [GraphQLAssemblyLayer!]!
}

type PageInfo {
  hasNextPage: Boolean!
  hasPreviousPage: Boolean!
  startCursor: String
  endCursor: String
}

input ProjectAssemblyAddInput {
  name: String!
  category: String!
  projectId: String!
  description: String = null
  lifeTime: Float = 50
  metaFields: JSON = null
  conversionFactor: Float = 1
  unit: GraphQLAssemblyUnit!
}

input ProjectAssemblyUpdateInput {
  id: String!
  name: String = null
  category: String = null
  description: String = null
  lifeTime: Float = null
  metaFields: JSON = null
  conversionFactor: Float = null
  unit: GraphQLAssemblyUnit = null
}

input ProjectEPDFilters {
  id: FilterOptions = null
  name: FilterOptions = null
  unit: SortOptions = null
  category: FilterOptions = null
  projectId: FilterOptions = null
  source: FilterOptions = null
  type: FilterOptions = null
  region: FilterOptions = null
  owner: FilterOptions = null
}

type Query {
  _entities(representations: [_Any!]!): [_Entity]!
  _service: _Service!
  projectAssemblies(projectId: String!): [GraphQLProjectAssembly!]!
  epds(filters: EPDFilters = null, sortBy: EPDSort = null, count: Int! = 50, after: String): GraphQLEPDConnection!
  projectEpds(projectId: String!, filters: ProjectEPDFilters = null): [GraphQLProjectEPD!]!
}

enum SortOptions {
  ASC
  DSC
}

enum TransportType {
  truck
  train
  ship
  plane
}

scalar _Any

union _Entity = GraphQLSchemaElement

type _Service {
  sdl: String!
}
